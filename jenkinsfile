pipeline{
    agent {
        node {
            label "linux && java11"
        }
    }
    stages {
            stage('Build') {
                steps {
                    echo 'Building the application...'
                    sh './gradlew clean build'
                }
            }
            stage('Test') {
                steps {
                sh './gradlew clean build --info'
                    echo 'Running tests...'
                    sh './gradlew test'
                }
            }
//             stage('Deploy') {
//                 steps {
//                     echo 'Deploying the application...'
//                     sh '''
//                     # Ganti dengan perintah deploy yang sesuai dengan kebutuhan Anda
//                     scp build/libs/myapp.jar root@157.245.199.194:/path/to/deploy/
//                     ssh root@157.245.199.194 'java -jar /path/to/deploy/myapp.jar &'
//                     '''
//                 }
//             }
        }
        post {
            always {
                echo 'Cleaning up...'
            }
            success {
                echo 'Pipeline succeeded!'
            }
            failure {
                echo 'Pipeline failed!'
            }
        }
}